<%- include('layout.ejs'); %>
<section class="col-sm-4 col-sm-offset-3" style="margin: auto;">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            padding: 0;
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSRhuYOCKcc9w408TV8o3wSRZfSsOZqMjGqJw&usqp=CAU');  
            background-size: cover;
        }
    </style>
        <h1>
            <span class="fa fa-sign-in"/>
            Signup
        </h1>
        
        <% if ( message.length > 0 ) { %>
            <div class="alert alert-danger">
                <%= message %>
            </div>
        <% } %>
    
        <form action="/register" method="post" onsubmit="return validateCode( this.role ) ">
            <div class="form-group">
                <label>
                    Name
                </label>
                <input type="text" class="form-control" name="name" value="<%= name %>"/> 
            </div>        
            <div class="form-group">
                <label>
                    Email
                </label>
                <input type="text" class="form-control" name="email" value="<%= email %>"/>
            </div>
            <div class="form-group">
                <label>
                    Password
                </label>
                <input type="password" class="form-control" name="password" value="<%= password %>"/>
            </div>
            <div class="form-group">
                <label>
                    Role
                </label>
            <select class="form-control" name="role">
                <option value="">Choose role</option>
                <option value="admin">Admin</option>
                <option value="customer">Customer</option>
                <option value="user">User</option>
            </select>            
        </div>

        <button type="submit" class="btn btn-warning btn-lg" style="background-color: rgb(143, 133, 119); border-color: rgb(143, 133, 119);">Signup</button>
    </form>
<hr>
        <p>
            Already have an account? 
            <a href="/login">
                Login
            </a>
        </p>       
    </section> 
</body>
</html>

<script>
    $(document).ready(function () {   
        $("#footer").hide()
    })

    function validateCode ( role ) 
    {
        if ( role.value == "user" )
        {
            return true
        }
        else if ( role.value == "customer" )
        {
            var code = prompt("Please enter your code", "rootCustomer")
            if ( code != null ) {
                if ( code == "rootCustomer" )
                {
                    return true
                }
                else
                {
                    return false
                }
            }
        }
        else if ( role.value == "admin" )
        {
            var code = prompt("Please enter your code", "rootAdmin")
            if ( code != null ) {
                if ( code == "rootAdmin" )
                {
                    return true
                }
                else
                {
                    return false
                }
            }
        }      
    }
</script>
